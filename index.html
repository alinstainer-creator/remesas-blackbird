<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Servicios Blackbird: Velocidad supers√≥nica en remesas. Tasas precisas para combinaciones entre Espa√±a, USA, M√©xico, Brasil, Chile, Ecuador, Per√∫, Argentina, Colombia y Venezuela. Calculadora de alta precisi√≥n para simular env√≠os seguros.">
    <meta name="keywords" content="remesas, cambio moneda, tasas conversi√≥n, Blackbird, Espa√±a, USA, M√©xico, Brasil, Chile, Ecuador, Per√∫, Argentina, Colombia, Venezuela, SR-71">
    <title>üõ©Ô∏è Servicios Blackbird - Remesas a Velocidad Mach 3+</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Roboto', sans-serif; 
            margin: 0; 
            padding: 0; 
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 50%, #16213e 100%); 
            color: #e0e0e0; 
            line-height: 1.6; 
            overflow-x: hidden;
        }
        .container { 
            max-width: 1100px; 
            margin: 20px auto; 
            background: rgba(10, 15, 25, 0.95); 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.5); 
            backdrop-filter: blur(15px); 
            border: 1px solid rgba(255,255,255,0.1);
        }
        header { 
            text-align: center; 
            margin-bottom: 40px; 
            animation: slideInDown 1s ease-out; 
        }
        .logo { 
            width: 140px; 
            height: auto; 
            border-radius: 50%; 
            box-shadow: 0 10px 25px rgba(0,123,255,0.4); 
            margin-bottom: 15px; 
            transition: transform 0.4s; 
        }
        .logo:hover { transform: scale(1.08) rotate(5deg); }
        h1 { 
            color: #00d4ff; 
            font-family: 'Orbitron', monospace; 
            font-size: 3em; 
            font-weight: 900; 
            margin: 10px 0; 
            text-shadow: 0 0 10px rgba(0,212,255,0.5); 
            letter-spacing: 2px;
        }
        .subtitle { 
            font-size: 1.2em; 
            color: #b0b0b0; 
            font-weight: 300; 
            margin-bottom: 20px; 
        }
        .brand-note { 
            background: linear-gradient(135deg, #1a1f2e, #16213e); 
            padding: 20px; 
            border-radius: 15px; 
            margin-bottom: 30px; 
            text-align: center; 
            box-shadow: inset 0 0 20px rgba(0,212,255,0.1); 
            border: 1px solid rgba(0,212,255,0.2);
            font-style: normal; 
        }
        .tabs { 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center; 
            margin-bottom: 30px; 
            gap: 10px; 
        }
        .tab { 
            padding: 15px 30px; 
            background: linear-gradient(135deg, #1a1f2e, #16213e); 
            cursor: pointer; 
            border: 1px solid rgba(0,212,255,0.3); 
            border-radius: 30px; 
            transition: all 0.4s; 
            font-weight: 500; 
            font-size: 1.1em; 
            color: #e0e0e0;
        }
        .tab:hover { 
            background: linear-gradient(135deg, #00d4ff, #0099cc); 
            color: #0f1419; 
            transform: translateY(-3px); 
            box-shadow: 0 6px 20px rgba(0,212,255,0.4); 
        }
        .tab.active { 
            background: linear-gradient(135deg, #00d4ff, #0099cc); 
            color: #0f1419; 
            box-shadow: 0 6px 20px rgba(0,212,255,0.4); 
        }
        .tab-content { 
            display: none; 
            animation: slideInUp 0.6s ease-out; 
        }
        .tab-content.active { display: block; }
        @keyframes slideInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-bottom: 25px; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.3); 
            border-radius: 15px; 
            overflow: hidden; 
            border: 1px solid rgba(0,212,255,0.2);
        }
        th, td { 
            border: 1px solid rgba(255,255,255,0.1); 
            padding: 15px; 
            text-align: left; 
        }
        th { 
            background: linear-gradient(135deg, #00d4ff, #0099cc); 
            color: #0f1419; 
            font-weight: 600; 
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        tr:nth-child(even) { background: rgba(255,255,255,0.05); }
        tr:hover { background: rgba(0,212,255,0.1); transform: scale(1.01); transition: 0.2s; }
        .calculator { 
            background: linear-gradient(135deg, #1a1f2e, #16213e); 
            padding: 25px; 
            border-radius: 15px; 
            margin-top: 25px; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.3); 
            border: 1px solid rgba(0,212,255,0.3);
        }
        .calculator h3 { 
            color: #00d4ff; 
            margin-top: 0; 
            font-size: 1.4em; 
            text-align: center; 
            font-family: 'Orbitron', monospace; 
            letter-spacing: 1px;
        }
        input, select, button { 
            padding: 12px; 
            margin: 8px; 
            border-radius: 8px; 
            border: 1px solid rgba(0,212,255,0.3); 
            font-size: 1em; 
            width: calc(100% - 20px); 
            box-sizing: border-box; 
            background: rgba(255,255,255,0.05); 
            color: #e0e0e0; 
            transition: border-color 0.3s, box-shadow 0.3s; 
        }
        input:focus, select:focus { border-color: #00d4ff; outline: none; box-shadow: 0 0 10px rgba(0,212,255,0.3); }
        button { 
            background: linear-gradient(135deg, #00d4ff, #0099cc); 
            color: #0f1419; 
            cursor: pointer; 
            border: none; 
            width: auto; 
            padding: 12px 30px; 
            font-weight: 600; 
            font-family: 'Orbitron', monospace; 
        }
        button:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 6px 15px rgba(0,212,255,0.4); 
        }
        #resultado { 
            font-weight: 600; 
            color: #00d4ff; 
            margin-top: 15px; 
            padding: 15px; 
            background: rgba(255,255,255,0.05); 
            border-radius: 10px; 
            text-align: center; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); 
            border: 1px solid rgba(0,212,255,0.3);
        }
        .emoji { font-size: 1.5em; margin: 0 5px; }
        footer { 
            background: linear-gradient(135deg, #0f1419, #1a1f2e); 
            color: #e0e0e0; 
            text-align: center; 
            padding: 30px; 
            margin-top: 50px; 
            border-top: 1px solid rgba(0,212,255,0.2);
        }
        .social-links { 
            display: flex; 
            justify-content: center; 
            gap: 25px; 
            margin: 15px 0; 
        }
        .social-links a { 
            color: #00d4ff; 
            font-size: 2.2em; 
            text-decoration: none; 
            transition: all 0.3s; 
            padding: 10px; 
            border-radius: 50%; 
            background: rgba(0,212,255,0.1); 
            border: 1px solid rgba(0,212,255,0.3);
        }
        .social-links a:hover { 
            color: #e0e0e0; 
            transform: scale(1.2) rotate(360deg); 
            background: rgba(0,212,255,0.3); 
            box-shadow: 0 0 20px rgba(0,212,255,0.5);
        }
        #loading, #error { 
            text-align: center; 
            margin: 20px; 
            padding: 25px; 
            border-radius: 10px; 
            font-weight: 500; 
            border: 1px solid rgba(0,212,255,0.3);
        }
        #loading { 
            background: rgba(0,212,255,0.1); 
            color: #00d4ff; 
        }
        #error { 
            background: rgba(220,53,69,0.1); 
            color: #dc3545; 
        }
        .update-btn { 
            background: linear-gradient(135deg, #00d4ff, #0099cc); 
            color: #0f1419; 
            border: none; 
            padding: 12px 25px; 
            border-radius: 25px; 
            cursor: pointer; 
            font-weight: 600; 
            font-family: 'Orbitron', monospace; 
            margin: 10px; 
            transition: all 0.3s; 
            letter-spacing: 1px;
        }
        .update-btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 6px 15px rgba(0,212,255,0.4); 
        }
        .how-it-works { 
            background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(0,153,204,0.1)); 
            padding: 20px; 
            border-radius: 15px; 
            margin: 20px 0; 
            text-align: center; 
            border: 1px solid rgba(0,212,255,0.3);
        }
        .how-it-works ul { list-style: none; padding: 0; }
        .how-it-works li { margin: 10px 0; font-size: 1.1em; }
        @media (max-width: 600px) { 
            .container { padding: 15px; margin: 10px; } 
            h1 { font-size: 2.2em; } 
            .tabs { flex-direction: column; align-items: center; } 
            .tab { width: 100%; max-width: 300px; } 
            table { font-size: 0.9em; } 
            input, select { font-size: 0.9em; } 
            .social-links { gap: 15px; } 
            .social-links a { font-size: 1.8em; } 
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <img src="logo blackbird.png" alt="Logo Servicios Blackbird SR-71" class="logo" onerror="this.src='https://via.placeholder.com/140x140/00d4ff/0f1419?text=SR-71';">
            <h1>üõ©Ô∏è Servicios Blackbird</h1>
            <p class="subtitle">Remesas a velocidad Mach 3+. Precisi√≥n stealth para combinaciones entre Espa√±a, USA, M√©xico, Brasil, Chile, Ecuador, Per√∫, Argentina, Colombia y Venezuela. Escaneamos las mejores tasas para ti.</p>
            <div class="brand-note">
                ‚ö° Como el SR-71 Blackbird, operamos a altitudes imposibles: velocidad supers√≥nica, invisibles a la competencia, con precisi√≥n de inteligencia total. Tus remesas, seguras y r√°pidas como un vuelo de reconocimiento.
            </div>
            <button class="update-btn" onclick="cargarDatos()">üîÑ Escanear Tasas Actuales</button>
        </header>
        
        <div class="how-it-works">
            <h3>üéØ Protocolo de Operaci√≥n (Simple y Eficiente)</h3>
            <ul>
                <li>1. Selecciona objetivo (pa√≠s) üëá</li>
                <li>2. Analiza rutas de conversi√≥n en la matriz üì°</li>
                <li>3. Simula trayectoria con calculadora de precisi√≥n üßÆ</li>
                <li>4. Ejecuta env√≠o a velocidad Mach 3+ üöÄ</li>
            </ul>
        </div>
        
        <div id="tabs" class="tabs"></div>
        <div id="tab-contents"></div>
        
        <div id="loading" style="display: none;">Escaneando rutas globales... ‚ö° Radar activo.</div>
        <div id="error" style="display: none;"></div>
    </div>

    <footer>
        <p>¬© 2025 Servicios Blackbird. Operando a Mach 3+ en remesas globales. Precisi√≥n. Velocidad. Confianza.</p>
        <div class="social-links">
            <a href="https://wa.me/+51XXXXXXXXX" target="_blank" title="WhatsApp - Contacto R√°pido">üì±</a>
            <a href="https://t.me/+i02VPMg23TNiOWJh" target="_blank" title="Canal Telegram - Alertas en Tiempo Real">‚úàÔ∏è</a>
            <a href="https://www.instagram.com/servicios_blackbird?igsh=MTlwZTVsaWR4dDBoMQ%3D%3D&utm_source=qr" target="_blank" title="Instagram - Estrategias y Tips">üì∏</a>
            <a href="https://www.tiktok.com/@remesasblackbird?_t=ZM-8zqW0ByBXVg&_r=1" target="_blank" title="TikTok - Contenido Din√°mico">üéµ</a>
        </div>
    </footer>

    <script>
        const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR3yMHp1HF-2JS1j0vNcp_snCjtTaWuF6y8AldyFGxbWvQrmhvisnagcBC1pWiskalafvz0EVY8svR6/pub?gid=983978085&single=true&output=csv';
        
        let data = [];
        let paisesUnicos = ['ESP', 'USA', 'MEX', 'BRA', 'CHI', 'ECU', 'PER', 'ARG', 'COL', 'VEN']; // Pa√≠ses fijos seg√∫n especificaci√≥n

        // Datos de ejemplo para fallback (tasas coherentes para combinaciones)
        const datosEjemplo = [
            { conversion: 'ESP-USA', precio: 1.08, origen: 'ESP', destino: 'USA' },
            { conversion: 'USA-ESP', precio: 0.93, origen: 'USA', destino: 'ESP' },
            { conversion: 'MEX-USA', precio: 18.5, origen: 'MEX', destino: 'USA' },
            { conversion: 'USA-MEX', precio: 0.054, origen: 'USA', destino: 'MEX' },
            { conversion: 'BRA-USA', precio: 5.2, origen: 'BRA', destino: 'USA' },
            { conversion: 'USA-BRA', precio: 0.192, origen: 'USA', destino: 'BRA' },
            { conversion: 'CHI-USA', precio: 920, origen: 'CHI', destino: 'USA' },
            { conversion: 'USA-CHI', precio: 0.00109, origen: 'USA', destino: 'CHI' },
            { conversion: 'ECU-USA', precio: 1.0, origen: 'ECU', destino: 'USA' },
            { conversion: 'USA-ECU', precio: 1.0, origen: 'USA', destino: 'ECU' },
            { conversion: 'PER-USA', precio: 3.75, origen: 'PER', destino: 'USA' },
            { conversion: 'USA-PER', precio: 0.267, origen: 'USA', destino: 'PER' },
            { conversion: 'ARG-USA', precio: 950, origen: 'ARG', destino: 'USA' },
            { conversion: 'USA-ARG', precio: 0.00105, origen: 'USA', destino: 'ARG' },
            { conversion: 'COL-USA', precio: 4100, origen: 'COL', destino: 'USA' },
            { conversion: 'USA-COL', precio: 0.000244, origen: 'USA', destino: 'COL' },
            { conversion: 'VEN-USA', precio: 36, origen: 'VEN', destino: 'USA' },
            { conversion: 'USA-VEN', precio: 0.0278, origen: 'USA', destino: 'VEN' }
        ];

        // Fetch CSV con PapaParse
        async function cargarDatos() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('error').style.display = 'none';
            console.log('Escaneando rutas del CSV...');
            try {
                Papa.parse(csvUrl, {
                    download: true,
                    header: false,
                    skipEmptyLines: true,
                    complete: function(results) {
                        console.log('CSV parseado, filas:', results.data.length);
                        procesarDatos(results.data);
                    },
                    error: function(err) {
                        throw new Error('Error al escanear CSV: ' + err);
                    }
                });
            } catch (err) {
                console.error('Error al cargar CSV:', err);
                data = datosEjemplo;
                crearTabs();
                document.getElementById('error').innerHTML = `<p>‚ö†Ô∏è Radar temporal bloqueado. Usando matriz de referencia para operaciones. <button onclick="cargarDatos()">Reescanear üîÑ</button></p>`;
                document.getElementById('error').style.display = 'block';
                document.getElementById('loading').style.display = 'none';
            }
        }

        // Procesar datos del CSV con coherencia para pares entre pa√≠ses especificados
        function procesarDatos(rows) {
            let pairs = [], rates = [], currentPair = null;
            rows.forEach((row, index) => {
                const col9 = row[9] ? row[9].trim().replace(/"/g, '') : '';
                if (col9 === 'PROVEDOR') {
                    let pairFull = row[1] ? row[1].trim().replace(/"/g, '') : '';
                    let pairClean = pairFull.replace('COTIZACION MESA ', '').split(' üá™')[0].split(' üá∫')[0].split(' üá≤')[0].split(' üáß')[0].split(' üá®')[0].split(' üá™')[1].split(' üáµ')[0].split(' üá¶')[0].split(' üá®')[1].split(' üáª')[0].trim(); // Ajustado para emojis de pa√≠ses
                    // Normalizar pa√≠ses a c√≥digos: ESP, USA, MEX, BRA, CHI, ECU, PER, ARG, COL, VEN
                    pairClean = pairClean.replace('Espa√±a', 'ESP').replace('USA', 'USA').replace('M√©xico', 'MEX').replace('Brasil', 'BRA').replace('Chile', 'CHI').replace('Ecuador', 'ECU').replace('Per√∫', 'PER').replace('Argentina', 'ARG').replace('Colombia', 'COL').replace('Venezuela', 'VEN');
                    currentPair = pairClean;
                    console.log('Ruta escaneada:', pairClean);
                } else if (col9 === 'VENTA IMAD' && currentPair) {
                    let rate = row[5] ? row[5].trim().replace(/"/g, '') : '';
                    rate = rate.replace('$', '').replace(',', '');
                    let rateFloat = parseFloat(rate);
                    if (!isNaN(rateFloat)) {
                        pairs.push(currentPair);
                        rates.push(rateFloat);
                        console.log('Tasa para ruta', currentPair, ':', rateFloat);
                    }
                    currentPair = null;
                }
            });

            if (pairs.length === 0) {
                console.warn('Matriz vac√≠a, activando referencia');
                data = datosEjemplo;
            } else {
                data = pairs.map((pair, i) => {
                    const [origen, destino] = pair.split('-');
                    return {
                        conversion: pair,
                        precio: rates[i],
                        origen: origen.trim(),
                        destino: destino.trim()
                    };
                });
            }
            // Filtrar solo pa√≠ses v√°lidos
            data = data.filter(d => paisesUnicos.includes(d.origen) && paisesUnicos.includes(d.destino));
            paisesUnicos = [...new Set(data.map(d => d.origen).concat(data.map(d => d.destino)))];
            console.log('Rutas coherentes:', paisesUnicos);
            crearTabs();
            document.getElementById('loading').style.display = 'none';
        }

        // Crear tabs por pa√≠s
        function crearTabs() {
            const tabsDiv = document.getElementById('tabs');
            const contentsDiv = document.getElementById('tab-contents');
            tabsDiv.innerHTML = '';
            contentsDiv.innerHTML = '';

            paisesUnicos.forEach((pais, index) => {
                const tabBtn = document.createElement('button');
                tabBtn.className = 'tab';
                tabBtn.textContent = pais.toUpperCase();
                tabBtn.onclick = () => mostrarTab(index);
                if (index === 0) tabBtn.classList.add('active');
                tabsDiv.appendChild(tabBtn);

                const contentDiv = document.createElement('div');
                contentDiv.className = 'tab-content';
                if (index === 0) contentDiv.classList.add('active');
                contentsDiv.appendChild(contentDiv);
            });

            mostrarTab(0);
        }

        // Mostrar tab espec√≠fico
        function mostrarTab(index) {
            document.querySelectorAll('.tab').forEach((tab, i) => tab.classList.toggle('active', i === index));
            document.querySelectorAll('.tab-content').forEach((content, i) => {
                content.classList.toggle('active', i === index);
                if (i === index) actualizarTabla(index);
            });
        }

        // Actualizar tabla para el pa√≠s
        function actualizarTabla(paisIndex) {
            const pais = paisesUnicos[paisIndex];
            const content = document.querySelectorAll('.tab-content')[paisIndex];
            const salidas = data.filter(d => d.origen === pais).map(d => ({...d, direccion: `De ${pais} a destino`}));
            const entradas = data.filter(d => d.destino === pais).map(d => ({...d, direccion: `A ${pais} desde origen`}));
            const dfPais = [...salidas, ...entradas].sort((a, b) => a.direccion.localeCompare(b.direccion) || a.conversion.localeCompare(b.conversion));

            let tablaHtml = `<h2>üì° Matriz de Rutas para ${pais.toUpperCase()}</h2><table><tr><th>Direcci√≥n</th><th>Conversi√≥n</th><th>Tasa (PRECISI√ìN SR-71)</th></tr>`;
            dfPais.forEach(row => {
                const precioFormateado = row.precio.toFixed(4).replace(/\.?0+$/, ''); // 4 decimales para precisi√≥n
                tablaHtml += `<tr><td>${row.direccion}</td><td>${row.conversion}</td><td>${precioFormateado}</td></tr>`;
            });
            tablaHtml += '</table>';

            // Calculadora
            tablaHtml += `
                <div class="calculator">
                    <h3>üßÆ Simulador de Trayectoria</h3>
                    <p style="text-align: center; color: #b0b0b0; font-size: 0.95em;">Ingresa monto en moneda origen. Recibe resultado en moneda destino. Precisi√≥n Mach 3+.</p>
                    <input type="number" id="monto-${pais}" placeholder="Monto origen (ej. 1000 ESP)" min="0" step="0.01">
                    <select id="conversionSelect-${pais}">
                        <option value="">Selecciona ruta...</option>
                        ${dfPais.map(row => `<option value="${row.conversion}|${row.precio}|${row.origen}">${row.conversion} (Tasa: ${row.precio.toFixed(4).replace(/\.?0+$/, '')})</option>`).join('')}
                    </select>
                    <button onclick="calcular('${pais}')">Ejecutar Simulaci√≥n ‚ö°</button>
                    <div id="resultado-${pais}"></div>
                </div>
            `;

            content.innerHTML = tablaHtml;
            console.log(`Matriz actualizada para ${pais}, rutas: ${dfPais.length}`);
        }

        // Funci√≥n calculadora coherente
        function calcular(pais) {
            const montoInput = document.getElementById(`monto-${pais}`);
            const select = document.getElementById(`conversionSelect-${pais}`);
            const monto = parseFloat(montoInput.value);
            const [conv, precioStr, origen] = select.value.split('|');
            const precio = parseFloat(precioStr);
            const resultadoDiv = document.getElementById(`resultado-${pais}`);
            const [monedaOrigen, monedaDestino] = conv.split('-');
            
            if (!monto || !conv || isNaN(precio)) {
                resultadoDiv.innerHTML = '<span style="color: #dc3545;">Objetivo no adquirido. Verifica monto y ruta. üîí</span>';
                return;
            }
            
            let resultado, unidadResultado;
            if (origen === pais) { // Env√≠o desde pais (origen) a destino: monto_origen / tasa = recibido_destino
                resultado = (monto / precio).toFixed(4).replace(/\.?0+$/, '');
                unidadResultado = monedaDestino;
            } else { // Recepci√≥n en pais (destino) desde origen: monto_origen * tasa = pagado_destino
                resultado = (monto * precio).toFixed(4).replace(/\.?0+$/, '');
                unidadResultado = monedaDestino;
            }
            resultadoDiv.innerHTML = `<span>üéØ Trayectoria confirmada: $${monto} ${emojiParaMoneda(monedaOrigen)} ‚Üí Recibes: $${resultado} ${emojiParaMoneda(unidadResultado)} (Tasa aplicada: ${precio.toFixed(4)}). Env√≠o a velocidad Mach 3+. ‚ö°</span>`;
        }

        function emojiParaMoneda(moneda) {
            const emojis = { 'ESP': 'üá™üá∏', 'USA': 'üá∫üá∏', 'MEX': 'üá≤üáΩ', 'BRA': 'üáßüá∑', 'CHI': 'üá®üá±', 'ECU': 'üá™üá®', 'PER': 'üáµüá™', 'ARG': 'üá¶üá∑', 'COL': 'üá®üá¥', 'VEN': 'üáªüá™' };
            return emojis[moneda] || 'üí±';
        }

        // Cargar datos al iniciar
        window.onload = () => {
            console.log('Sistema Blackbird online. Iniciando escaneo...');
            cargarDatos();
        };
    </script>
</body>
</html>
