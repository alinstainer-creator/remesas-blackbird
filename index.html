<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Servicios Blackbird: Calculadora de remesas premium. Tasas Venta IMAD directo del CSV.">
<meta name="keywords" content="remesas, cambio moneda, tasas conversi√≥n, Blackbird, Chile, Argentina, Per√∫, Colombia, M√©xico, Espa√±a, USA, Venezuela, Ecuador, Brasil, Uruguay, Canad√°">
<title>üõ©Ô∏è Servicios Blackbird - Calculadora Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Roboto Condensed', sans-serif;
    margin: 0;
    padding: 0;
    background: #000000;
    color: #d0e0f0;
    line-height: 1.5;
}
.container {
    max-width: 1100px;
    margin: 20px auto;
    background: #0d0d0d;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 0 50px rgba(0, 180, 255, 0.4);
    border: 1px solid rgba(0, 180, 255, 0.3);
}
header {
    text-align: center;
    margin-bottom: 30px;
}
.logo {
    width: 160px;
    height: auto;
    border-radius: 50%;
    margin-bottom: 20px;
    box-shadow: 0 0 25px rgba(0, 180, 255, 0.5);
}
h1 {
    color: #00b4ff;
    font-family: 'Orbitron', monospace;
    font-size: 3em;
    margin: 10px 0;
    text-shadow: 0 0 15px rgba(0, 180, 255, 0.7);
}
.subtitle {
    font-size: 1.1em;
    color: #a0c0e0;
    margin-bottom: 25px;
}
.calculator-section {
    background: #111;
    padding: 25px;
    border-radius: 10px;
    margin-bottom: 25px;
    border: 1px solid rgba(0, 180, 255, 0.3);
}
.calculator-section h2 {
    color: #00b4ff;
    text-align: center;
    font-family: 'Orbitron', monospace;
    margin-bottom: 20px;
}
.form-row {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
}
.form-group {
    flex: 1;
}
label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
}
select, input {
    width: 100%;
    padding: 12px;
    border-radius: 6px;
    border: 1px solid rgba(0, 180, 255, 0.3);
    background: #1a1a1a;
    color: #d0e0f0;
    font-size: 1em;
}
button {
    width: 100%;
    padding: 15px;
    background: linear-gradient(135deg, #00b4ff, #0077cc);
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 1.2em;
    font-weight: 700;
    cursor: pointer;
    margin-bottom: 15px;
    text-shadow: 0 1px 3px rgba(0,0,0,0.4);
}
button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(0, 180, 255, 0.6);
}
#resultado {
    margin-top: 15px;
    padding: 15px;
    background: rgba(0, 180, 255, 0.1);
    border-radius: 6px;
    text-align: center;
    font-size: 1.2em;
    font-weight: 500;
    border: 1px solid rgba(0, 180, 255, 0.3);
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
th, td {
    padding: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}
th {
    background: linear-gradient(135deg, #00b4ff, #0077cc);
    color: #0d0d0d;
}
tr:hover {
    background: rgba(0, 180, 255, 0.1);
}
footer {
    text-align: center;
    padding: 20px;
    margin-top: 20px;
    border-top: 1px solid rgba(0,180,255,0.3);
}
.social-links {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 10px;
}
.social-links a {
    color: #00b4ff;
    font-size: 1.8em;
    text-decoration: none;
}
.social-links a:hover {
    color: #0077cc;
}
@media (max-width: 600px) {
    .form-row { flex-direction: column; }
    h1 { font-size: 2em; }
    .logo { width: 120px; }
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
<div class="container">
    <header>
        <img src="logo blackbird.png" alt="Logo Blackbird" class="logo">
        <h1>üõ©Ô∏è Servicios Blackbird</h1>
        <p class="subtitle">Calculadora de remesas premium</p>
    </header>

    <div class="calculator-section">
        <h2>üßÆ Calculadora de Remesas</h2>
        <div class="form-row">
            <div class="form-group">
                <label for="origen">Pa√≠s de Origen</label>
                <select id="origen" onchange="actualizarDestino()">
                    <option value="">Selecciona...</option>
                </select>
            </div>
            <div class="form-group">
                <label for="destino">Pa√≠s de Destino</label>
                <select id="destino">
                    <option value="">Selecciona...</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="monto">Monto (Moneda Local)</label>
            <input type="number" id="monto" placeholder="Ej. 1000" min="0" step="0.01">
        </div>
        <button onclick="calcularRemesa()">Calcular</button>
        <button onclick="pedirTelegram()">Pedir Servicio por Telegram</button>
        <div id="resultado"></div>
    </div>

    <table id="ratesTable">
        <thead>
            <tr>
                <th>Origen</th>
                <th>Destino</th>
                <th>Tasa IMAD</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <footer>
        <p>¬© 2025 Servicios Blackbird</p>
        <div class="social-links">
            <a href="https://t.me/+i02VPMg23TNiOWJh" target="_blank">‚úàÔ∏è</a>
            <a href="https://www.instagram.com/servicios_blackbird" target="_blank">üì∏</a>
            <a href="https://www.tiktok.com/@remesasblackbird" target="_blank">üéµ</a>
        </div>
    </footer>
</div>

<script>
const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR3yMHp1HF-2JS1j0vNcp_snCjtTaWuF6y8AldyFGxbWvQrmhvisnagcBC1pWiskalafvz0EVY8svR6/pub?gid=983978085&single=true&output=csv';

let rates = {}; 
let paisesSet = new Set();
let paisesMap = {};

async function cargarDatos() {
    try {
        const response = await fetch(csvUrl);
        const csvText = await response.text();
        Papa.parse(csvText, {
            header: false,
            skipEmptyLines: true,
            complete: function(results) {
                procesarDatos(results.data);
            }
        });
    } catch(e) {
        console.error(e);
        alert("Error al cargar datos del sheet");
    }
}

function procesarDatos(rows) {
    rows.forEach(row => {
        if(row[9] && row[9].trim() === 'Venta IMAD') {
            const par = row[3] ? row[3].trim() : '';
            const precio = row[5] ? parseFloat(row[5].replace(',', '.')) : 0;
            if(par && precio){
                rates[par] = precio;
                const [origen, destino] = par.split('-');
                paisesSet.add(origen);
                paisesSet.add(destino);
                paisesMap[origen] = origen;
                paisesMap[destino] = destino;
            }
        }
    });
    poblarSelects();
    mostrarTabla();
}

function poblarSelects(){
    const origenSelect = document.getElementById('origen');
    const destinoSelect = document.getElementById('destino');
    origenSelect.innerHTML = '<option value="">Selecciona...</option>';
    destinoSelect.innerHTML = '<option value="">Selecciona...</option>';
    [...paisesSet].forEach(p => {
        origenSelect.innerHTML += `<option value="${p}">${p}</option>`;
        destinoSelect.innerHTML += `<option value="${p}">${p}</option>`;
    });
}

function actualizarDestino(){
    document.getElementById('destino').value = '';
}

function mostrarTabla(){
    const tbody = document.querySelector('#ratesTable tbody');
    tbody.innerHTML = '';
    for(let par in rates){
        const [origen,destino] = par.split('-');
        tbody.innerHTML += `<tr><td>${origen}</td><td>${destino}</td><td>${rates[par]}</td></tr>`;
    }
}

function calcularRemesa(){
    const origen = document.getElementById('origen').value;
    const destino = document.getElementById('destino').value;
    const monto = parseFloat(document.getElementById('monto').value);
    const resultadoDiv = document.getElementById('resultado');

    if(!origen || !destino || isNaN(monto) || monto <= 0){
        resultadoDiv.innerHTML = '<p style="color:#dc3545;">Selecciona origen, destino y monto v√°lido</p>';
        return;
    }
    if(origen === destino){
        resultadoDiv.innerHTML = '<p style="color:#dc3545;">Origen y destino deben ser diferentes</p>';
        return;
    }

    const par = `${origen}-${destino}`;
    const tasa = rates[par];
    if(!tasa){
        resultadoDiv.innerHTML = '<p style="color:#dc3545;">Ruta no disponible</p>';
        return;
    }

    const resultado = (monto * tasa).toFixed(2);
    resultadoDiv.innerHTML = `<p>$${monto} ${origen} ‚Üí Recibes: $${resultado} ${destino} (Tasa IMAD: ${tasa})</p>`;
}

function pedirTelegram(){
    const origen = document.getElementById('origen').value;
    const destino = document.getElementById('destino').value;
    const monto = document.getElementById('monto').value;
    if(!origen || !destino || !monto) return;
    const msg = encodeURIComponent(`Hola, quiero enviar ${monto} de ${origen} a ${destino}`);
    window.open(`https://t.me/+i02VPMg23TNiOWJh?text=${msg}`,'_blank');
}

window.onload = () => { cargarDatos(); }
</script>
</body>
</html>
