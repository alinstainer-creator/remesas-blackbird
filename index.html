<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Terminal Blackbird - Conversor Supers√≥nico</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
<style>
body {
    margin:0;
    font-family:'Roboto Condensed',sans-serif;
    background:#000;
    color:#0df;
    overflow-x:hidden;
}
.container {
    max-width:1100px;
    margin:40px auto;
    padding:40px;
    border-radius:12px;
    background:linear-gradient(145deg,#0a0f19,#1a1a2e);
    box-shadow:0 15px 50px rgba(0,150,255,0.4);
    border:2px solid rgba(0,180,255,0.25);
    position:relative;
    overflow:hidden;
}
.container::before {
    content:'';
    position:absolute;
    top:-60%; left:-60%;
    width:220%; height:220%;
    background:radial-gradient(circle, rgba(0,180,255,0.15) 0%,transparent 70%);
    animation:pulse 20s infinite;
}
@keyframes pulse {
    0% { transform:scale(0.5); opacity:0.6; }
    100% { transform:scale(1.7); opacity:0; }
}
header { text-align:center; margin-bottom:40px; }
.logo { width:180px; border-radius:50%; margin-bottom:25px; box-shadow:0 10px 25px rgba(0,180,255,0.5); border:3px solid #00b4ff; }
h1 { color:#00b4ff; font-family:'Orbitron', monospace; font-size:3em; letter-spacing:2px; text-shadow:0 0 10px rgba(0,180,255,0.7); margin:10px 0; }
.subtitle { font-size:1.2em; color:#0df; margin-bottom:30px; }
.calculator-section { background:linear-gradient(135deg,#0d1725,#1a2e44); padding:30px; border-radius:10px; border:1px solid rgba(0,180,255,0.35); margin-bottom:30px; }
.calculator-section h2 { color:#0df; text-align:center; font-family:'Orbitron', monospace; margin-bottom:25px; font-size:2em; }
.form-row { display:flex; gap:20px; margin-bottom:20px; flex-wrap:wrap; }
.form-group { flex:1; min-width:140px; }
label { display:block; margin-bottom:8px; color:#0df; font-weight:600; text-transform:uppercase; }
select, input { width:100%; padding:12px; border-radius:6px; border:1px solid rgba(0,180,255,0.35); background:rgba(255,255,255,0.05); color:#0df; font-size:1em; transition:border-color 0.3s, box-shadow 0.3s; }
select:focus, input:focus { border-color:#00b4ff; box-shadow:0 0 10px rgba(0,180,255,0.3); outline:none; }
button { padding:14px; border:none; border-radius:6px; font-size:1.1em; font-family:'Orbitron',monospace; cursor:pointer; margin-top:15px; transition:transform 0.2s, box-shadow 0.2s; width:100%; }
button:hover { transform:translateY(-3px); box-shadow:0 6px 18px rgba(0,180,255,0.6); }
.calculate-btn { background:linear-gradient(135deg,#00b4ff,#0077cc); color:#000; font-weight:700; }
.telegram-btn { background:linear-gradient(135deg,#28a745,#1a8f5e); color:#fff; font-weight:700; }
#resultado { margin-top:20px; padding:15px; background:rgba(0,180,255,0.1); border-radius:6px; text-align:center; font-size:1.2em; font-weight:500; border:1px solid rgba(0,180,255,0.3); box-shadow:inset 0 0 10px rgba(0,180,255,0.1); }
#loading, #error { text-align:center; padding:15px; border-radius:6px; margin:15px 0; }
#loading { background:rgba(0,180,255,0.1); color:#0df; font-style:italic; }
#error { background:rgba(220,53,69,0.15); color:#dc3545; font-weight:600; }
footer { text-align:center; color:#0df; padding:20px; border-top:1px solid rgba(0,180,255,0.25); }
@media(max-width:600px){.form-row{flex-direction:column;}.logo{width:120px;}.container{padding:20px;}}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
<div class="container">
<header>
<img src="logo blackbird.png" alt="Logo Terminal Blackbird" class="logo" onerror="this.src='https://via.placeholder.com/180x180/00b4ff/1a2e44?text=SR-71';">
<h1>üõ©Ô∏è Terminal Blackbird</h1>
<p class="subtitle">Supers√≥nica conversi√≥n de monedas</p>
</header>

<div class="calculator-section">
<h2>üí† Conversor de Monedas</h2>
<div class="form-row">
<div class="form-group">
<label for="origen">Origen</label>
<select id="origen">
<option value="">Selecciona...</option>
</select>
</div>
<div class="form-group">
<label for="destino">Destino</label>
<select id="destino">
<option value="">Selecciona...</option>
</select>
</div>
</div>
<div class="form-group">
<label for="monto">Monto (moneda local)</label>
<input type="number" id="monto" placeholder="Ej: 1000" min="0" step="0.01">
</div>
<button class="calculate-btn" onclick="calcular()">Calcular</button>
<button class="telegram-btn" onclick="pedirServicio()">Pedir Servicio</button>
<div id="resultado"></div>
<div id="loading">Cargando tasas...</div>
<div id="error"></div>
</div>

<footer>
<p>¬© 2025 Terminal Blackbird. Operando a velocidad supers√≥nica.</p>
</footer>
</div>

<script>
const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT9Teo-_5ka3LKx7FXL3x3yV3uf4KhoI61ewnVJyJ90XRnksoObf4CDn-lJvrFKiQ/pub?gid=983978085&single=true&output=csv';
let rates = []; // Array de objetos {origen,destino,tasa}

function cargarDatos(){
    document.getElementById('loading').style.display='block';
    document.getElementById('error').style.display='none';
    fetch(csvUrl).then(r=>r.text()).then(csvText=>{
        Papa.parse(csvText,{header:false,skipEmptyLines:true,complete:function(results){
            procesarDatos(results.data);
        }});
    }).catch(err=>{
        document.getElementById('loading').style.display='none';
        document.getElementById('error').innerText='Error al cargar las tasas. Ruta no disponible.';
    });
}

function procesarDatos(data){
    rates=[];
    for(let i=6,j=7;i<data.length;i+=9,j+=9){
        let fila=data[i];
        let tasaFila=data[j];
        if(fila && tasaFila){
            let par=fila[3].trim(); // Columna D
            let origen=par.split('-')[0].trim();
            let destino=par.split('-')[1].trim();
            let tasa=parseFloat(tasaFila[5] || tasaFila[6]); // columnas F-G
            if(!isNaN(tasa)){
                rates.push({origen,destino,tasa});
            }
        }
    }
    poblarSelects();
    document.getElementById('loading').style.display='none';
}

function poblarSelects(){
    const origenSelect=document.getElementById('origen');
    const destinoSelect=document.getElementById('destino');
    origenSelect.innerHTML='<option value="">Selecciona...</option>';
    destinoSelect.innerHTML='<option value="">Selecciona...</option>';
    let paises=new Set();
    rates.forEach(r=>{paises.add(r.origen);paises.add(r.destino);});
    paises=Array.from(paises).sort();
    paises.forEach(p=>{
        origenSelect.innerHTML+=`<option value="${p}">${p}</option>`;
        destinoSelect.innerHTML+=`<option value="${p}">${p}</option>`;
    });
}

function calcular(){
    const origen=document.getElementById('origen').value;
    const destino=document.getElementById('destino').value;
    const monto=parseFloat(document.getElementById('monto').value);
    const resultadoDiv=document.getElementById('resultado');
    if(!origen || !destino || isNaN(monto) || monto<=0){
        resultadoDiv.innerHTML='<span style="color:#f33;">Selecciona origen, destino y monto v√°lido.</span>';
        return;
    }
    if(origen===destino){
        resultadoDiv.innerHTML='<span style="color:#f33;">Origen y destino deben ser diferentes.</span>';
        return;
    }
    const par=rates.find(r=>r.origen===origen && r.destino===destino);
    if(!par){
        resultadoDiv.innerHTML='<span style="color:#f33;">Ruta no disponible.</span>';
        return;
    }
    const recibido=(monto*par.tasa).toFixed(2);
    resultadoDiv.innerHTML=`Env√≠as ${monto} ${origen} ‚Üí Recibes ${recibido} ${destino}`;
}

function pedirServicio(){
    const origen=document.getElementById('origen').value;
    const destino=document.getElementById('destino').value;
    const monto=document.getElementById('monto').value;
    let mensaje=`Hola! Quiero enviar ${monto} de ${origen} a ${destino}.`;
    window.open(`https://t.me/+i02VPMg23TNiOWJh?text=${encodeURIComponent(mensaje)}`,'_blank');
}

window.onload=cargarDatos;
</script>
</body>
</html>

